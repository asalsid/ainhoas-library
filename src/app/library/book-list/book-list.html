<div class="books-container">
  <div class="pagination-header">
    <div class="pagination-info">
      <span>{{ getPaginationInfo() }}</span>
    </div>
    <div class="items-per-page">
      <label for="itemsPerPage">Items per page:</label>
      <select 
        id="itemsPerPage" 
        [value]="itemsPerPage()" 
        (change)="onItemsPerPageChange($event)"
      >
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="15">15</option>
        <option value="20">20</option>
      </select>
    </div>
  </div>

  <div class="books-table">
    <table>
      <thead>
        <tr>
          <th>Title</th>
          <th>Author</th>
          <th>Year</th>
          <th>Genre</th>
        </tr>
      </thead>
      <tbody>
        @for (book of paginatedBooks(); track book.id) {
          <tr (click)="selectBook(book)">
            <td>{{ book.title }}</td>
            <td>{{ book.author }}</td>
            <td>@if (book.year) { {{ book.year }} } @else { N/A }</td>
            <td>@if (book.genre) { {{ book.genre }} } @else { N/A }</td>
          </tr>
        } @empty {
          <tr>
            <td colspan="4" class="no-books">No books available</td>
          </tr>
        }
      </tbody>
    </table>
  </div>

  @if (totalPages() > 1) {
    <div class="pagination-controls">
      <button 
        [disabled]="!canGoPrevious()" 
        (click)="previousPage()"
        class="pagination-btn"
      >
        &laquo; Previous
      </button>
      
      @for (pageNum of pageNumbers(); track pageNum) {
        <button 
          [class.active]="pageNum === currentPage()"
          (click)="goToPage(pageNum)"
          class="pagination-btn page-number"
        >
          {{ pageNum }}
        </button>
      }
      
      <button 
        [disabled]="!canGoNext()" 
        (click)="nextPage()"
        class="pagination-btn"
      >
        Next &raquo;
      </button>
    </div>
  }
</div>