<div class="dialog-backdrop" (click)="cancel()"></div>
<div class="dialog">
    <form [formGroup]="bookForm" (ngSubmit)="saveData()">
        <div class="form-field">
            <label for="title"><strong>Title:</strong></label>
            <input 
                id="title" 
                type="text" 
                formControlName="title"
                [class.error]="bookForm.get('title')?.invalid && bookForm.get('title')?.touched"
            />
            @if (getFieldError('title')) {
                <span class="error-message">{{ getFieldError('title') }}</span>
            }
        </div>

        <div class="form-field">
            <label for="author"><strong>Author:</strong></label>
            <input 
                id="author" 
                type="text" 
                formControlName="author"
                [class.error]="bookForm.get('author')?.invalid && bookForm.get('author')?.touched"
            />
            @if (getFieldError('author')) {
                <span class="error-message">{{ getFieldError('author') }}</span>
            }
        </div>

        <div class="form-field">
            <label for="year"><strong>Year:</strong></label>
            <input 
                id="year" 
                type="text" 
                formControlName="year"
                placeholder="e.g., 2023"
                [class.error]="bookForm.get('year')?.invalid && bookForm.get('year')?.touched"
            />
            @if (getFieldError('year')) {
                <span class="error-message">{{ getFieldError('year') }}</span>
            }
        </div>

        <div class="form-field">
            <label for="genre"><strong>Genre:</strong></label>
            <input 
                id="genre" 
                type="text" 
                formControlName="genre"
                [class.error]="bookForm.get('genre')?.invalid && bookForm.get('genre')?.touched"
            />
            @if (getFieldError('genre')) {
                <span class="error-message">{{ getFieldError('genre') }}</span>
            }
        </div>

        <div class="form-actions">
            <button type="submit" [disabled]="bookForm.invalid">Save Changes</button>
            @if (!isNew) { 
                <button type="button" (click)="deleteBook()">Delete Book</button> 
            }
            <button type="button" (click)="cancel()">Cancel</button>
        </div>
    </form>
</div>